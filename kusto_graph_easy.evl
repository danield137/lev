{
  "schema_version": 1,
  "type": "mcp_eval",
  "description": "MCP evaluation scenarios for Kusto/Microsoft Fabric RTI queries",
  "logging": {
    "mcp_calls": true,
    "results": true
  },
  "llm_config": {
    "overrides": {
      "solver": {
        "persona": "concise_solver"
      },
      "solver.reasoning": {
        "model_variant": "reasoning"
      },
      "asker": {
        "model_variant": "fast",
        "persona": "diligent_asker"
      }
    }
  },
  "mcp_servers": {
    "microsoft-fabric-rti-mcp": {
      "command": "uvx",
      "args": [
        "--no-cache",
        "microsoft-fabric-rti-mcp"
      ],
      "env": {
        "KUSTO_DEFAULT_SERVICE_URI": "https://help.kusto.windows.net",
        "KUSTO_DEFAULT_DATABASE": "Samples",
        "FASTMCP_LOG_LEVEL": "CRITICAL",
        "FABRIC_RTI_SILENT": "true",
        "AZURE_HTTP_LOGGING_ENABLED": "false",
        "AZURE_LOG_LEVEL": "CRITICAL",
        "PYTHONWARNINGS": "ignore"
      },
      "suppress_output": true
    }
  },
  "evals": [
    {
      "id": "snb_most_known_people_with_hints",
      "question": "In the Samples database https://help.kusto.windows.net/, who is the most well-known person in the LDBC_SNB_Interactive graph by KNOWS in-degree? Use graph operators (e.g. graph-match)!",
      "execution": {
        "mcps": ["microsoft-fabric-rti-mcp"],
        "solver": {
          "max_reasoning_steps": 4,
          "max_retrospective_turns": 1
        },
        "asker": {
          "max_turns": 1
        }
      },
      "expectations": {
        "tool_calls": [
          "kusto_query"
        ],
        "tool_inputs": {
          "kusto_query": {
            "acceptable_queries": []
          }
        },
        "results": {
          "kusto_query": {
            "kusto_record": {
              "schema": [
                {
                  "n_id": "long",
                  "count_": "int"
                }
              ],
              "values": [
                [
                  32985348834375,
                  331
                ]
              ]
            }
          }
        }
      },
      "scoring": [
        {
          "type": "llm_judge", 
          "mode": "critique",
          "weight": 0.7
        }, 
        {
          "type": "llm_judge", 
          "mode": "extract", 
          "weight": 0.3,
          "parameters": {"expected": "Person::32985348834375"}
        }
      ]
    },
    {
      "id": "snb_most_known_people_no_hints",
      "question": "In the Samples database https://help.kusto.windows.net/, who is the most well-known person in the LDBC_SNB_Interactive graph",
      "execution": {
        "mcps": [
          "microsoft-fabric-rti-mcp"
        ],
        "solver": {
          "max_reasoning_steps": 4,
          "max_retrospective_turns": 1
        },
        "asker": {
          "max_turns": 1
        }
      },
      "expectations": {
        "tool_calls": [
          "kusto_query"
        ],
        "tool_inputs": {
          "kusto_query": {
            "acceptable_queries": []
          }
        },
        "results": {
          "kusto_query": {
            "kusto_record": {
              "schema": [
                {
                  "n_id": "long",
                  "count_": "int"
                }
              ],
              "values": [
                [
                  32985348834375,
                  331
                ]
              ]
            }
          }
        }
      },
      "scoring": [
        {
          "type": "llm_judge", 
          "mode": "critique",
          "weight": 0.7
        }, 
        {
          "type": "llm_judge", 
          "mode": "extract", 
          "weight": 0.3,
          "parameters": {"expected": "Person::32985348834375"}
        }
      ]
    },
    {
      "id": "snb_degrees_of_separation",
      "question": "In the Samples database https://help.kusto.windows.net/, what is the minimal degree of separation between Person::94 and Person::17592186045864?",
      "execution": {
        "mcps": [
          "microsoft-fabric-rti-mcp"
        ],
        "solver": {
          "max_reasoning_steps": 4,
          "max_retrospective_turns": 1
        },
        "asker": {
          "max_turns": 2
        }
      },
      "expectations": {
        "tool_calls": [
          "kusto_query"
        ],
        "tool_inputs": {
          "kusto_query": {
            "acceptable_queries": []
          }
        },
        "results": {
          "kusto_query": {
            "kusto_record": {
              "schema": [
                {
                  "n_id": "long",
                  "count_": "int"
                }
              ],
              "values": [
                [
                  32985348834375,
                  331
                ]
              ]
            }
          }
        }
      },
      "scoring": [
        {
          "type": "llm_judge", 
          "mode": "critique",
          "weight": 0.7
        }, 
        {
          "type": "llm_judge", 
          "mode": "extract", 
          "weight": 0.3,
          "parameters": {"expected": 2}
        }
      ]
    }
  ]
}
